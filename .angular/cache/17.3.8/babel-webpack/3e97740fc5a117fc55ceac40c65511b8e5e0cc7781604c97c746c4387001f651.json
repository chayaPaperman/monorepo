{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/router\";\nimport * as i2 from \"../_services/user.service\";\nimport * as i3 from \"../_services/auth.service\";\nimport * as i4 from \"../_services/role-service.service\";\nimport * as i5 from \"primeng/dropdown\";\nimport * as i6 from \"@angular/common\";\nimport * as i7 from \"@angular/forms\";\nconst _c0 = a0 => ({\n  \"is-invalid\": a0\n});\nfunction RegisterComponent_Conditional_3_Conditional_9_Conditional_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtext(1, \"Username is required\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction RegisterComponent_Conditional_3_Conditional_9_Conditional_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtext(1, \"Username must be at least 3 characters\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction RegisterComponent_Conditional_3_Conditional_9_Conditional_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtext(1, \"Username must be at most 20 characters\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction RegisterComponent_Conditional_3_Conditional_9_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 13);\n    i0.ɵɵtemplate(1, RegisterComponent_Conditional_3_Conditional_9_Conditional_1_Template, 2, 0, \"div\")(2, RegisterComponent_Conditional_3_Conditional_9_Conditional_2_Template, 2, 0, \"div\")(3, RegisterComponent_Conditional_3_Conditional_9_Conditional_3_Template, 2, 0, \"div\");\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    i0.ɵɵnextContext();\n    const username_r4 = i0.ɵɵreference(8);\n    i0.ɵɵadvance();\n    i0.ɵɵconditional(1, username_r4.errors[\"required\"] ? 1 : -1);\n    i0.ɵɵadvance();\n    i0.ɵɵconditional(2, username_r4.errors[\"minlength\"] ? 2 : -1);\n    i0.ɵɵadvance();\n    i0.ɵɵconditional(3, username_r4.errors[\"maxlength\"] ? 3 : -1);\n  }\n}\nfunction RegisterComponent_Conditional_3_Conditional_15_Conditional_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtext(1, \"Email is required\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction RegisterComponent_Conditional_3_Conditional_15_Conditional_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtext(1, \"Email must be a valid email address\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction RegisterComponent_Conditional_3_Conditional_15_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 13);\n    i0.ɵɵtemplate(1, RegisterComponent_Conditional_3_Conditional_15_Conditional_1_Template, 2, 0, \"div\")(2, RegisterComponent_Conditional_3_Conditional_15_Conditional_2_Template, 2, 0, \"div\");\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    i0.ɵɵnextContext();\n    const email_r5 = i0.ɵɵreference(14);\n    i0.ɵɵadvance();\n    i0.ɵɵconditional(1, email_r5.errors[\"required\"] ? 1 : -1);\n    i0.ɵɵadvance();\n    i0.ɵɵconditional(2, email_r5.errors[\"email\"] ? 2 : -1);\n  }\n}\nfunction RegisterComponent_Conditional_3_Conditional_21_Conditional_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtext(1, \"passwordHash is required\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction RegisterComponent_Conditional_3_Conditional_21_Conditional_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtext(1, \"Password must be at least 6 characters\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction RegisterComponent_Conditional_3_Conditional_21_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 13);\n    i0.ɵɵtemplate(1, RegisterComponent_Conditional_3_Conditional_21_Conditional_1_Template, 2, 0, \"div\")(2, RegisterComponent_Conditional_3_Conditional_21_Conditional_2_Template, 2, 0, \"div\");\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    i0.ɵɵnextContext();\n    const passwordHash_r6 = i0.ɵɵreference(20);\n    i0.ɵɵadvance();\n    i0.ɵɵconditional(1, passwordHash_r6.errors[\"required\"] ? 1 : -1);\n    i0.ɵɵadvance();\n    i0.ɵɵconditional(2, passwordHash_r6.errors[\"minlength\"] ? 2 : -1);\n  }\n}\nfunction RegisterComponent_Conditional_3_Conditional_25_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 19);\n    i0.ɵɵtext(1, \" Signup failed!\");\n    i0.ɵɵelement(2, \"br\");\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate1(\"\", ctx_r2.errorMessage, \" \");\n  }\n}\nfunction RegisterComponent_Conditional_3_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r1 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"form\", 8, 0);\n    i0.ɵɵlistener(\"ngSubmit\", function RegisterComponent_Conditional_3_Template_form_ngSubmit_0_listener() {\n      i0.ɵɵrestoreView(_r1);\n      const f_r2 = i0.ɵɵreference(1);\n      const ctx_r2 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(f_r2.form.valid && ctx_r2.onSubmit());\n    });\n    i0.ɵɵelementStart(2, \"div\", 9)(3, \"p-dropdown\", 10);\n    i0.ɵɵtwoWayListener(\"ngModelChange\", function RegisterComponent_Conditional_3_Template_p_dropdown_ngModelChange_3_listener($event) {\n      i0.ɵɵrestoreView(_r1);\n      const ctx_r2 = i0.ɵɵnextContext();\n      i0.ɵɵtwoWayBindingSet(ctx_r2.form.role, $event) || (ctx_r2.form.role = $event);\n      return i0.ɵɵresetView($event);\n    });\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(4, \"div\", 9)(5, \"label\", 11);\n    i0.ɵɵtext(6, \"Username\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"input\", 12, 1);\n    i0.ɵɵtwoWayListener(\"ngModelChange\", function RegisterComponent_Conditional_3_Template_input_ngModelChange_7_listener($event) {\n      i0.ɵɵrestoreView(_r1);\n      const ctx_r2 = i0.ɵɵnextContext();\n      i0.ɵɵtwoWayBindingSet(ctx_r2.form.username, $event) || (ctx_r2.form.username = $event);\n      return i0.ɵɵresetView($event);\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(9, RegisterComponent_Conditional_3_Conditional_9_Template, 4, 3, \"div\", 13);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(10, \"div\", 9)(11, \"label\", 14);\n    i0.ɵɵtext(12, \"Email\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(13, \"input\", 15, 2);\n    i0.ɵɵtwoWayListener(\"ngModelChange\", function RegisterComponent_Conditional_3_Template_input_ngModelChange_13_listener($event) {\n      i0.ɵɵrestoreView(_r1);\n      const ctx_r2 = i0.ɵɵnextContext();\n      i0.ɵɵtwoWayBindingSet(ctx_r2.form.email, $event) || (ctx_r2.form.email = $event);\n      return i0.ɵɵresetView($event);\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(15, RegisterComponent_Conditional_3_Conditional_15_Template, 3, 2, \"div\", 13);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(16, \"div\", 9)(17, \"label\", 16);\n    i0.ɵɵtext(18, \"passwordHash\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(19, \"input\", 17, 3);\n    i0.ɵɵtwoWayListener(\"ngModelChange\", function RegisterComponent_Conditional_3_Template_input_ngModelChange_19_listener($event) {\n      i0.ɵɵrestoreView(_r1);\n      const ctx_r2 = i0.ɵɵnextContext();\n      i0.ɵɵtwoWayBindingSet(ctx_r2.form.passwordHash, $event) || (ctx_r2.form.passwordHash = $event);\n      return i0.ɵɵresetView($event);\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(21, RegisterComponent_Conditional_3_Conditional_21_Template, 3, 2, \"div\", 13);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(22, \"div\", 9)(23, \"button\", 18);\n    i0.ɵɵtext(24, \"Sign Up\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵtemplate(25, RegisterComponent_Conditional_3_Conditional_25_Template, 4, 1, \"div\", 19);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const f_r2 = i0.ɵɵreference(1);\n    const username_r4 = i0.ɵɵreference(8);\n    const email_r5 = i0.ɵɵreference(14);\n    const passwordHash_r6 = i0.ɵɵreference(20);\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"options\", ctx_r2.allRolies);\n    i0.ɵɵtwoWayProperty(\"ngModel\", ctx_r2.form.role);\n    i0.ɵɵadvance(4);\n    i0.ɵɵtwoWayProperty(\"ngModel\", ctx_r2.form.username);\n    i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction1(12, _c0, f_r2.submitted && username_r4.errors));\n    i0.ɵɵadvance(2);\n    i0.ɵɵconditional(9, username_r4.errors && f_r2.submitted ? 9 : -1);\n    i0.ɵɵadvance(4);\n    i0.ɵɵtwoWayProperty(\"ngModel\", ctx_r2.form.email);\n    i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction1(14, _c0, f_r2.submitted && email_r5.errors));\n    i0.ɵɵadvance(2);\n    i0.ɵɵconditional(15, email_r5.errors && f_r2.submitted ? 15 : -1);\n    i0.ɵɵadvance(4);\n    i0.ɵɵtwoWayProperty(\"ngModel\", ctx_r2.form.passwordHash);\n    i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction1(16, _c0, f_r2.submitted && passwordHash_r6.errors));\n    i0.ɵɵadvance(2);\n    i0.ɵɵconditional(21, passwordHash_r6.errors && f_r2.submitted ? 21 : -1);\n    i0.ɵɵadvance(4);\n    i0.ɵɵconditional(25, f_r2.submitted && ctx_r2.isSignUpFailed ? 25 : -1);\n  }\n}\nfunction RegisterComponent_Conditional_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 20);\n    i0.ɵɵtext(1, \"Your registration is successful!\");\n    i0.ɵɵelementEnd();\n  }\n}\nexport let RegisterComponent = /*#__PURE__*/(() => {\n  class RegisterComponent {\n    constructor(router, userService, authService, roleService) {\n      this.router = router;\n      this.userService = userService;\n      this.authService = authService;\n      this.roleService = roleService;\n      this.allRolies = [];\n      this.form = {\n        username: null,\n        email: null,\n        passwordHash: null,\n        role: null\n      };\n      this.isSuccessful = false;\n      this.isSignUpFailed = false;\n      this.errorMessage = '';\n    }\n    ngOnInit() {\n      this.roleService.getAllRolies().subscribe(suc => {\n        this.allRolies = suc;\n        console.log(this.allRolies);\n      }, err => console.log(err));\n    }\n    onSubmit() {\n      const {\n        username,\n        passwordHash,\n        email,\n        role\n      } = this.form;\n      console.log(username, passwordHash, email);\n      this.userService.register(username, passwordHash, email, role).subscribe({\n        next: data => {\n          console.log(data);\n          this.isSuccessful = true;\n          this.isSignUpFailed = false;\n        },\n        error: err => {\n          console.log(err);\n          this.errorMessage = err.error.message;\n          this.isSignUpFailed = true;\n        }\n      });\n    }\n    static #_ = this.ɵfac = function RegisterComponent_Factory(t) {\n      return new (t || RegisterComponent)(i0.ɵɵdirectiveInject(i1.Router), i0.ɵɵdirectiveInject(i2.UserService), i0.ɵɵdirectiveInject(i3.AuthService), i0.ɵɵdirectiveInject(i4.RoleServiceService));\n    };\n    static #_2 = this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n      type: RegisterComponent,\n      selectors: [[\"app-register\"]],\n      decls: 5,\n      vars: 1,\n      consts: [[\"f\", \"ngForm\"], [\"username\", \"ngModel\"], [\"email\", \"ngModel\"], [\"passwordHash\", \"ngModel\"], [1, \"col-md-12\"], [1, \"card\", \"card-container\"], [\"id\", \"profile-img\", \"src\", \"//ssl.gstatic.com/accounts/ui/avatar_2x.png\", 1, \"profile-img-card\"], [\"name\", \"form\", \"novalidate\", \"\"], [\"name\", \"form\", \"novalidate\", \"\", 3, \"ngSubmit\"], [1, \"form-group\"], [\"name\", \"role\", \"optionLabel\", \"name\", \"placeholder\", \"Select a Role\", 3, \"ngModelChange\", \"options\", \"ngModel\"], [\"for\", \"username\"], [\"type\", \"text\", \"name\", \"username\", \"required\", \"\", \"minlength\", \"3\", \"maxlength\", \"20\", 1, \"form-control\", 3, \"ngModelChange\", \"ngModel\", \"ngClass\"], [1, \"invalid-feedback\"], [\"for\", \"email\"], [\"type\", \"email\", \"name\", \"email\", \"required\", \"\", \"email\", \"\", 1, \"form-control\", 3, \"ngModelChange\", \"ngModel\", \"ngClass\"], [\"for\", \"passwordHash\"], [\"type\", \"password\", \"name\", \"passwordHash\", \"required\", \"\", \"minlength\", \"6\", 1, \"form-control\", 3, \"ngModelChange\", \"ngModel\", \"ngClass\"], [1, \"btn\", \"btn-primary\", \"btn-block\"], [1, \"alert\", \"alert-warning\"], [1, \"alert\", \"alert-success\"]],\n      template: function RegisterComponent_Template(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵelementStart(0, \"div\", 4)(1, \"div\", 5);\n          i0.ɵɵelement(2, \"img\", 6);\n          i0.ɵɵtemplate(3, RegisterComponent_Conditional_3_Template, 26, 18, \"form\", 7)(4, RegisterComponent_Conditional_4_Template, 2, 0);\n          i0.ɵɵelementEnd()();\n        }\n        if (rf & 2) {\n          i0.ɵɵadvance(3);\n          i0.ɵɵconditional(3, !ctx.isSuccessful ? 3 : 4);\n        }\n      },\n      dependencies: [i5.Dropdown, i6.NgClass, i7.ɵNgNoValidate, i7.DefaultValueAccessor, i7.NgControlStatus, i7.NgControlStatusGroup, i7.RequiredValidator, i7.MinLengthValidator, i7.MaxLengthValidator, i7.EmailValidator, i7.NgModel, i7.NgForm],\n      styles: [\"label[_ngcontent-%COMP%]{display:block;margin-top:10px}.card-container.card[_ngcontent-%COMP%]{max-width:400px!important;padding:40px}.card[_ngcontent-%COMP%]{background-color:#f7f7f7;padding:20px 25px 30px;margin:50px auto 25px;border-radius:2px;box-shadow:0 2px 2px #0000004d}.profile-img-card[_ngcontent-%COMP%]{width:96px;height:96px;margin:0 auto 10px;display:block;border-radius:50%}\"]\n    });\n  }\n  return RegisterComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}